<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>123123</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            <!--페이지가 로드됐을때 실행-->
            userapi();
            photoapi();
        })

        function userapi(){
            $.ajax({
                type: 'GET',
                url: '/user/info',
                success: function (response) {
                    console.log(response)
                }
            });
        }
        function photoapi(){
            $.ajax({
                type: 'GET',
                url: '/api/photos',
                success: function (response) {
                    for (let i = 0; i < response.length; i++) {
                        let fid = response[i].fileId
                        let src = getphoto(fid)
                        addHTML(src)
                    }
                }
            });
        }
        function addHTML(src){
            let temp_tag = `<img src="/image/${src}">`
            $('.body').append(temp_tag)
        }

        function getphoto(fileId){
            $.ajax({
                type: 'GET',
                url: '/api/photos/'+fileId,
                async: false,
                success: function (response) {
                    fname = response
                }
            });
            return fname;
        }

        function search(){
            let words = $('#search-bar').val();
            $.ajax({
                type: 'GET',
                data: {"words":words},
                url: '/api/search/',
                success: function (response) {
                    console.log(response)
                }
            });
        }

    </script>
</head>
<body>
<input name="words" type="text" placeholder="검색어를 입력하세요" id="search-bar">
    <button onclick="search()">검색</button>
<div class="body">

</div>
</body>
</html>